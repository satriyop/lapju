#
# Custom Nginx Configuration for LAPJU
# This file configures nginx to allow larger file uploads
#
# For Laravel Valet users:
# 1. Copy this to Valet's nginx config directory:
#    cp valet-nginx.conf ~/.config/valet/Nginx/lapju.test
#
# 2. Restart nginx:
#    valet restart
#
# For production nginx:
# Include this in your server block configuration
#

# Allow uploads up to 10MB
# This prevents the "413 Payload Too Large" error
# Client-side compression reduces photos to ~2MB before upload
client_max_body_size 10M;

# Increase buffer sizes for file uploads
client_body_buffer_size 256k;
client_header_buffer_size 4k;
large_client_header_buffers 8 16k;

# Increase timeouts for slow mobile connections
client_body_timeout 60s;
client_header_timeout 60s;
send_timeout 60s;

# FastCGI settings for PHP file uploads
fastcgi_read_timeout 300s;
fastcgi_send_timeout 300s;
fastcgi_buffers 16 16k;
fastcgi_buffer_size 32k;
